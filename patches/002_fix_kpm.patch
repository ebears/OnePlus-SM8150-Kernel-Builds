--- a/kpm.c	2025-06-23 23:50:08.000000000 +0800
+++ b/kpm.c	2025-06-23 23:53:20.538833061 +0800
@@ -44,19 +44,20 @@
 #include "kpm.h"
 #include "compact.h"
 
-#ifndef NO_OPTIMIZE
-#if defined(__GNUC__) && !defined(__clang__)
-#define NO_OPTIMIZE __attribute__((optimize("O0")))
-#elif defined(__clang__)
-#define NO_OPTIMIZE __attribute__((optnone))
-#else
-#define NO_OPTIMIZE
-#endif
-#endif
+//#ifndef NO_OPTIMIZE
+//#if defined(__GNUC__) && !defined(__clang__)
+//#define NO_OPTIMIZE __attribute__((optimize("O0")))
+//#elif defined(__clang__)
+//#define NO_OPTIMIZE __attribute__((optnone))
+//#else
+//#define NO_OPTIMIZE
+//#endif
+//#endif
 
 // ============================================================================================
 
-noinline NO_OPTIMIZE void sukisu_kpm_load_module_path(const char *path,
+//noinline NO_OPTIMIZE
+void sukisu_kpm_load_module_path(const char *path,
 						      const char *args,
 						      void *ptr,
 						      void __user *result)
@@ -70,7 +71,8 @@
 		printk("KPM: Copy to user failed.");
 }
 
-noinline NO_OPTIMIZE void sukisu_kpm_unload_module(const char *name, void *ptr,
+//noinline NO_OPTIMIZE
+void sukisu_kpm_unload_module(const char *name, void *ptr,
 						   void __user *result)
 {
 	// This is a KPM module stub.
@@ -82,7 +84,8 @@
 		printk("KPM: Copy to user failed.");
 }
 
-noinline NO_OPTIMIZE void sukisu_kpm_num(void __user *result)
+//noinline NO_OPTIMIZE
+void sukisu_kpm_num(void __user *result)
 {
 	// This is a KPM module stub.
 	int res = 0;
@@ -92,7 +95,8 @@
 		printk("KPM: Copy to user failed.");
 }
 
-noinline NO_OPTIMIZE void sukisu_kpm_info(const char *name, void __user *out,
+//noinline NO_OPTIMIZE
+void sukisu_kpm_info(const char *name, void __user *out,
 					  void __user *result)
 {
 	// This is a KPM module stub.
@@ -104,8 +108,8 @@
 		printk("KPM: Copy to user failed.");
 }
 
-noinline NO_OPTIMIZE void
-sukisu_kpm_list(void __user *out, unsigned int bufferSize, void __user *result)
+//noinline NO_OPTIMIZE
+void sukisu_kpm_list(void __user *out, unsigned int bufferSize, void __user *result)
 {
 	// This is a KPM module stub.
 	int res = -1;
@@ -115,8 +119,8 @@
 		printk("KPM: Copy to user failed.");
 }
 
-noinline NO_OPTIMIZE void
-sukisu_kpm_control(void __user *name, void __user *args, void __user *result)
+//noinline NO_OPTIMIZE
+void sukisu_kpm_control(void __user *name, void __user *args, void __user *result)
 {
 	// This is a KPM module stub.
 	int res = -1;
@@ -127,7 +131,8 @@
 		printk("KPM: Copy to user failed.");
 }
 
-noinline NO_OPTIMIZE void sukisu_kpm_version(void __user *out,
+//noinline NO_OPTIMIZE
+void sukisu_kpm_version(void __user *out,
 					     unsigned int bufferSize,
 					     void __user *result)
 {
@@ -146,7 +151,8 @@
 EXPORT_SYMBOL(sukisu_kpm_version);
 EXPORT_SYMBOL(sukisu_kpm_control);
 
-noinline int sukisu_handle_kpm(unsigned long arg2, unsigned long arg3,
+//noinline
+int sukisu_handle_kpm(unsigned long arg2, unsigned long arg3,
 			       unsigned long arg4, unsigned long arg5)
 {
 	if (arg2 == SUKISU_KPM_LOAD) {
